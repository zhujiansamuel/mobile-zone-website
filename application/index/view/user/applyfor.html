<!DOCTYPE html>
<html>
	<head>
		{include file="common/meta" /}
	</head>
	<body>
		{include file="common/head" /}
		<div class="cart">
			<div class="pd150 contain">
				<div class="address1">
					<a href="/">ホーム</a>
					&gt;
					<a href="/user/shopping"> カート</a>
					&gt;
					<a href="javascript:;">{$type == 1 ? '店頭買取のお申し込み' : '郵送買取のお申し込み'}</a>
				</div>
			</div>
		<form name="form" id="order-form" class="form-vertical" method="POST" action="">
			<div class="contain orderDeta1">
				<div class="orderLeft">
					<div class="orderLeft1">
						<div class="orderDeta2">
							お客様の情報
						</div>
						<div class="orderDeta3">
							{$userInfo->name}
						</div>
						<div class="orderDeta4">
							{switch $userInfo->persion_type}
							    {case 1}個人{/case}
							    {case 2}法人{/case}
							    {default /}<font color="red">未設定</font>
							{/switch}
							<br />
							{$userInfo->email}<br />
							〒{$userInfo->zip_code ?: '<font color="red">未設定</font>'} <br />
							{$userInfo->address} <br />
							電話番号:{$userInfo->mobile ?: '<font color="red">未設定</font>'} <br />
							生年月日:{$userInfo->birthday ?: '<font color="red">未設定</font>'} <br />
							性別:{if $userInfo->gender}{$userInfo->gender == 1 ? '男性' : '女性'} {else/} <font color="red">未設定</font> {/if}<br />
							職業:
							{if $userInfo->occupation}
							    {:getCategoryName($userInfo->occupation)}
							{else/}
							    <font color="red">未設定</font>
							{/if}
						</div>
						<div class="orderDeta5">
							<a href="/user">変更</a>
						</div>
					</div>
					<div class="orderLeft6">
						<div class="orderDeta2">
							お申し込み内容
						</div>
						<div class="orderLeft7">
							<div class="orderLeft8">
								<div class="orderLeft9">
									<ul>
										<li class="oWidth">
											商品品名
										</li>
										<li class="oWidth1">
											数量
										</li>
										<li class="oWidth2">
											小計
										</li>
									</ul>
								</div>
							{volist name="list" id="item"}
								<div class="orderLeft10">
									<ul>
										<li class="oWidth">
											<div class="orderLeft11">
												<div class="orderLeft11a">
													<img alt="" src="{$item['image']}">
												</div>
												<div class="orderLeft11b">
													<div class="orderLeft11c">
														{$item['title']}
													</div>
													<div class="orderLeft11d">
														{if $item['memo']}
														備考 : {$item['memo']} <br>
														{/if}
														状態 : {$item['type'] == 1 ? '新品' : '中古'}
													</div>
												</div>
											</div>
										</li>
										<li class="oWidth1">
											{$item['num']}
										</li>
										<li class="oWidth2">
											￥{$item['price']}（税込）
										</li>
									</ul>
								</div>
							{/volist}
							</div>
						</div>
						<div class="orderDeta5">
							<a href="/user/shopping">変更</a>
						</div>
					</div>
					<div class="orderLeft1">
						<div class="orderDeta2">
							お支払い方法
						</div>
						<div class="orderDeta3">
							ご希望のお支払い方法を選択してください
						</div>
						<div class="orderLeft12">
							<label for="new_lab">
								<input name="pay_mode" class="new_lab" checked type="radio" value="1">
								現金払い
							</label>
							<label for="new_lab">
								<input name="pay_mode" class="new_lab" type="radio" value="2">
								銀行振込
							</label>
			            </div>
						<div style="display:none;" class="orderLeft13" id="et">
							<div class="orderLeft13a">
								振込口座
							</div>
							<div class="orderLeft13b">
								<label for="ptyh">
									<input name="bank_account_type" id="ptyh" type="radio" value="1">
									普通預金
								</label>
								<label for="ptyh">
									<input name="bank_account_type" id="ptyh" type="radio" value="2">
									当座預金
								</label>
							</div>
							<div class="orderLeft13c">
								<input placeholder="例）XXXX銀行" type="text" id="etx1" name="bank">
							</div>
							<div class="orderLeft13c">
								<input placeholder="例）XXXX支店" type="text" id="etx2" name="bank_branch">
							</div>
							<div class="orderLeft13c">
								<input placeholder="例）XXXX支店号" type="text" id="etx2" name="bank_branch_no">
							</div>
							<div class="orderLeft13a">
								振込口座番号
							</div>
							<div class="orderLeft13c">
								<input placeholder="半角32文字まで" type="text" id="etx3" name="bank_account">
							</div>
							<div class="orderLeft13a">
								振込口座名義
							</div>
							<div class="orderLeft13c">
								<input placeholder="ご本人様名義の口座に限ります" id="etx4" type="text" name="bank_account_name">
							</div>
						</div>
					</div>
				{if $type == 1}
					<div class="orderLeft1">
						<div class="orderDeta2">
							来店予約
						</div>
						<div class="orderDeta3">
							買取方法：{$type == 1 ? '店頭買取' : '郵送買取'}
						</div>
						<div class="orderLeft16">
							<span>来店場所</span>
							<select id="" name="store_id" required>
								<option value="">選択してください</option>
							{volist name="shopList" id="item"}
								<option value="{$item['id']}">{$item['name']}</option>
							{/volist}
							</select>
					    </div>
						<div class="orderLeft16">
							<span>来店日時</span>
							<input type="text" id="dateInput" readonly name="go_store_date" value="2024/07/12" required="">
						</div>
						<div class="orderLeft16">
							<span>来店時間</span>
							<select id="go_store_time" name="go_store_time" required="">
								<option value="">選択してください</option>
							{volist name="goShopTime" id="item"}
								<option value="{$item}">{$item}</option>
							{/volist}
							</select>
						</div>
					</div>
				{/if}
				</div>
				<script type="text/javascript" charset="utf-8">
				    document.addEventListener('DOMContentLoaded', function() {
                        const dateInput = document.getElementById('dateInput');
                        const selectedDateDisplay = document.getElementById('selectedDateDisplay');
                        const dateValue = document.getElementById('dateValue');
                        
                        // 获取今天的日期并格式化为YYYY-MM-DD
                        const today = new Date();
                        const yyyy = today.getFullYear();
                        const mm = String(today.getMonth() + 1).padStart(2, '0');
                        const dd = String(today.getDate()).padStart(2, '0');
                        const todayFormatted = `${yyyy}-${mm}-${dd}`;
                        
                        // 设置最小日期为今天
                        dateInput.setAttribute('min', todayFormatted);
                        
                        // 显示当前选择的日期
                        dateInput.addEventListener('change', function() {
                            if (this.value) {
                                const selectedDate = new Date(this.value);
                                const options = { year: 'numeric', month: 'long', day: 'numeric' };
                                const formattedDate = selectedDate.toLocaleDateString('zh-CN', options);
                                
                                dateValue.textContent = formattedDate;
                                selectedDateDisplay.classList.add('active');
                            } else {
                                selectedDateDisplay.classList.remove('active');
                            }
                        });
                        
                        // 初始显示今天的日期
                        dateInput.value = todayFormatted;
                        dateValue.textContent = today.toLocaleDateString('zh-CN', { 
                            year: 'numeric', 
                            month: 'long', 
                            day: 'numeric' 
                        });
                        selectedDateDisplay.classList.add('active');
                    });
				</script>
				<div class="orderRight">
					<div class="orderLeft1">
						<div class="orderDeta2">
							お支払い金額
						</div>
						<div class="orderRight1">
							<span>商品合計（税込）</span>
							<code>￥{$totalMoney}</code>
						</div>
						<div class="orderRight1">
							<span>手数料</span>
							<code>￥0</code>
						</div>
						<div class="orderRight2">
							<span>合計：（税込）</span>
							<code>￥{$totalMoney}</code>
						<input type="hidden" name="type" value="{$type}">
						</div>
						<div class="orderRight3 tips_tc4bzz">
							<input type="submit" class="submitorder" value="お申し込みを確定する">
						</div>
					</div>
				</div>
			</div>
		</form>
		</div>
		
		{include file="common/foot" /}
		
	</body>
</html>
